{% extends 'planogrs/base.html' %}


{% load static %}
{% load my_filters %}

<!-- Bloco destinado aos scripts para cada página -->
{% block styles %} {% endblock %}
{% block menu %} {% endblock %}
{% block links %} {% endblock %}
{% block rodape-links %} {% endblock %}

<!-- Bloco de conteúdo -->
{% block conteudo %}
<div class="container py-5">

    <h2 class="border-bottom px-3 pb-2 mb-5 text-center">
        {{titulo}}
    </h2>


    <!-- ======================================================================================= -->


    <h4 class="border-bottom border-top p-1 text-center bg-light">Dados da Empresa</h4>

    <div class="row">
        <div class="col-md-2 font-weight-bold">
            CNPJ:
        </div>
        <div class="col-md">
            {{empresa.cnpj}}
        </div>
    </div>


    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Razão Social:
        </div>
        <div class="col-md">
            {{empresa.razao_social}}
        </div>
    
        <div class="col-md-2 font-weight-bold">
            Nome Fantasia:
        </div>
        <div class="col-md">
            {{empresa.nome_fantasia|default_if_none:''}}
        </div>
    </div>
    
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            CNAE:
        </div>
        <div class="col-md">
            {{empresa.cnae|default_if_none:''}}
        </div>
    
        <div class="col-md-2 font-weight-bold">
            Atividade Específica:
        </div>
        <div class="col-md">
            {{empresa.atividade_especifica|default_if_none:''}}
        </div>
    </div>
    
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Inscrição Estadual:
        </div>
        <div class="col-md">
            {{empresa.inscricao_estadual|default_if_none:''}}
        </div>
    
        <div class="col-md-2 font-weight-bold">
            Cadastro Imobiliário:
        </div>
        <div class="col-md">
            {{empresa.cadastro_imobiliario}}
        </div>
    </div>
    
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            CEP:
        </div>
        <div class="col-md-2">
            {{empresa.cep}}
        </div>
    
        <div class="col-md-1 font-weight-bold">
            Endereço:
        </div>
        <div class="col-md">
            {{empresa.endereco}}
        </div>
    </div>
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Bairro:
        </div>
        <div class="col-md-2">
            {{empresa.bairro}}
        </div>
    
        <div class="col-md-1 font-weight-bold">
            Número:
        </div>
        <div class="col-md-1">
            {{empresa.numero}}
        </div>
    
        <div class="col-md-2 font-weight-bold">
            Complemento:
        </div>
        <div class="col-md">
            {{empresa.complemento|default_if_none:''}}
        </div>
    </div>
    
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Telefone Comercial:
        </div>
        <div class="col-md">
            {{empresa.telefone_comercial}}
        </div>
    
        <div class="col-md-2 font-weight-bold">
            Telefone Celular:
        </div>
        <div class="col-md">
            {{empresa.telefone_celular}}
        </div>
    </div>
    
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Email:
        </div>
        <div class="col-md">
            {{empresa.email}}
        </div>
    </div>
    
    <hr>
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Responsável Técnico:
        </div>
        <div class="col-md">
            {{empresa.nome_tecnico}}
        </div>
    
        <div class="col-md-2 font-weight-bold">
            Conselho nº:
        </div>
        <div class="col-md">
            {{empresa.conselho_numero_tecnico}}
        </div>
    </div>
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            RG:
        </div>
        <div class="col-md">
            {{empresa.rg_tecnico}}
        </div>
    
        <div class="col-md-2 font-weight-bold">
            CPF:
        </div>
        <div class="col-md">
            {{empresa.cpf_tecnico}}
        </div>
    </div>
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Telefone:
        </div>
        <div class="col-md">
            {{empresa.telefone_tecnico}}
        </div>
    
        <div class="col-md-2 font-weight-bold">
            Email:
        </div>
        <div class="col-md">
            {{empresa.email_tecnico}}
        </div>
    </div>
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            ART Nº:
        </div>
        <div class="col-md">
            {{empresa.art_num}}
        </div>
    </div>
    
    <hr>
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Licença IAP:
        </div>
        <div class="col-md">
            {{empresa.get_licenca_iap_display}}
        </div>
    
        <div class="col-md-2 font-weight-bold">
            Nº da Licença:
        </div>
        <div class="col-md">
            {{empresa.num_lincenca|default_if_none:''}}
        </div>
    </div>
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Nº do Protocolo:
        </div>
        <div class="col-md">
            {{empresa.num_protocolo|default_if_none:''}}
        </div>
    
        <div class="col-md-2 font-weight-bold">
            Data de Validade:
        </div>
        <div class="col-md">
            {{empresa.data_validade|default_if_none:''}}
        </div>
    </div>
    
    <hr>
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            ART Nº:
        </div>
        <div class="col-md">
            {{empresa.area_construida}}
        </div>
    </div>
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Descrição do Empreendimento:
        </div>
        <div class="col-md">
            {{empresa.descricao_empreendimento}}
        </div>
    </div>
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Descrição do Processo Produtivo:
        </div>
        <div class="col-md">
            {{empresa.descricao_processo_produtivo|default_if_none:''}}
        </div>
    </div>
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Metas de Minimização:
        </div>
        <div class="col-md">
            {{empresa.metas_minimizacao|default_if_none:''}}
        </div>
    </div>
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Ações Preventivas:
        </div>
        <div class="col-md">
            {{empresa.acoes_preventivas|default_if_none:''}}
        </div>
    </div>
    
    
    <hr>
    
    {% for resp in responsaveis %}
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            Responsável Jurídico:
        </div>
        <div class="col-md">
            {{resp.nome}}
        </div>
    </div>
    
    <div class="row my-1">
        <div class="col-md-2 font-weight-bold">
            RG:
        </div>
        <div class="col-md">
            {{resp.rg}}
        </div>
    
        <div class="col-md-2 font-weight-bold">
            CPF:
        </div>
        <div class="col-md">
            {{resp.cpf}}
        </div>
    </div>
    
    <div class="row mt-1 mb-3">
        <div class="col-md-2 font-weight-bold">
            Email:
        </div>
        <div class="col-md">
            {{resp.email}}
        </div>
    
        <div class="col-md-2 font-weight-bold">
            Cargo:
        </div>
        <div class="col-md">
            {{resp.cargo|default_if_none:''}}
        </div>
    </div>
    
    {% empty %}
    <p>Nenhum responsável jurídico foi informado.</p>
    {% endfor %}


    <!-- ======================================================================================= -->


    <h4 class="border-bottom border-top p-1 text-center my-4 bg-light">Resíduos por Setor</h4>


    {% for setor in setores %}

    <div class="row my-2">
        <div class="col-md">
            <div class="table-responsive-md">

                <table class="table table-striped table-sm shadow-sm">

                    <thead>
                        <tr class="font-weight-bold table-dark text-dark">
                            <th class="font-125 border-0 text-center" colspan="100%">
                                {{ setor.nome }}
                            </th>
                        </tr>

                        <tr class="">
                            <th class="border-0">Tipo do Resíduo</th>
                            <th class="border-0">Resíduo</th>
                            <th class="border-0">Especificação</th>
                            <th class="border-0">Periodicidade de Coleta</th>
                        </tr>
                    </thead>

                    <tbody>

                        {% for residuo in residuos %}

                        {% if residuo.setor == setor %}
                        <tr>
                            <td class="">{{ residuo.tipo_residuo }}</td>
                            <td class="">{{ residuo.residuo }}</td>
                            <td class="">{{ residuo.especificar_residuo }}</td>
                            <td class="">{{ residuo.get_periodicidade_coleta_display }}</td>
                        </tr>
                        {% endif %}

                        {% endfor %}

                    </tbody>

                </table>

            </div>
        </div>
    </div>

    {% empty %}
    <p>Nenhum setor cadastrado!</p>
    {% endfor %}


    <!-- ======================================================================================= -->


    <h4 class="border-bottom border-top p-1 text-center my-4 bg-light">Histórico de Movimentações</h4>


    {% for situacao in situacoes %}

    <div class="situacoes">


        <div class="row">
            <div class="col-md-1">
                <b>Data/Hora:</b>
            </div>
            <div class="col-md">
                {{situacao.data_movimentacao}}
            </div>

            <div class="col-md-1">
                <b>Situação:</b>
            </div>
            <div class="col-md">
                {{situacao.tipo_situacao.nome}}
            </div>

            <div class="col-md-1">
                <b>Usuário:</b>
            </div>
            <div class="col-md">
                {{ situacao.movimentado_por|formatarUsuario }}
            </div>
        </div>

        <div class="row">
            <div class="col-md-1">
                <b>Detalhes:</b>
            </div>
            <div class="col-md">
                {{situacao.informacoes_complementares}}
            </div>
        </div>

        <hr>

        {% empty %}
        <p>Este plano ainda não foi movimentado.</p>
        {% endfor %}

    </div>


    <!-- ======================================================================================= -->


</div>
{% endblock %}


<!-- Bloco destinado aos scripts para cada página -->
{% block scripts %}


<script>
    $(document).ready(function () {

        // $(".situacoes .row").last().addClass("bg-light")

    });
</script>
{% endblock %}


{% block rodape %}
<div class="container-fluid bg-light text-center p-3">
    <span class="">Gerado por SisGRS</span>
</div>
{% endblock %}